!function(t){function e(t){t+="";var e=t.charAt(0).toUpperCase();return e+t.substr(1)}function n(e,o){var s=t(e).data(i);return s?s:(this.settings=t.extend({},n.defaultSettings,o),this.$content=t(e),this._init(),void this.$content.data(i,this))}var i="__apfm__",o="apfm-",s="apfm",r="apfm";String.prototype.ucfirst||(String.prototype.ucfirst=function(){return e(this)}),n.prototype={_init:function(){this.opened=!1,this._addContainer(),this._applyContent(),this._bind(),this.settings.autoOpen&&this.open()},_addContainer:function(){this.$container=t(n.template).appendTo(t("body")),this.$container.css("background-color",this.settings.backgroundColor),this.$wrapper=this.$container.find("."+o+"wrapper"),this.$closeButton=this.$container.find("."+o+"close-button"),this.settings.showCloseButton||this.$closeButton.hide()},_removeContainer:function(){this.$container.remove()},_applyContent:function(){this.$placeholder=t("<div></div>",{"class":o+"placeholder"}),this.$content.after(this.$placeholder),this.$content.appendTo(this.$wrapper),this.$content.attr("tabIndex",-1)},_resetContent:function(){this.$placeholder.insertAfter(this.$placeholder),this.$placeholder.remove(),this.$placeholder=void 0,this.$content.removeAttr("tabIndex")},_bind:function(){var e=this;this.settings.openSelector&&t(this.settings.openSelector).on("click."+s,function(){return e.open(t(this)),!1}),this.settings.closeSelector&&this.$container.find(this.settings.closeSelector).on("click."+s,function(){return e.close(),!1}),this.$content.on("keydown."+s,function(t){e.opened&&27==t.keyCode&&(e.close(),t.preventDefault())})},_unbind:function(){this.$content.find(this.settings.openSelector).on("click."+s),this.$content.find(this.settings.closeSelector).on("click."+s),this.$content.off("keydown."+s)},_trigger:function(t,e){var n="on"+t.ucfirst(),i=this.settings[n];"function"==typeof i&&i.apply(this.$content,e),t=r+t.ucfirst(),this.$content.trigger(t,e)},_triggerHandler:function(t,e){var n,i="on"+t.ucfirst(),o=this.settings[i],s=void 0;return"function"==typeof o&&(s=o.apply(this.$content,e)),t=r+t.ucfirst(),n=void 0!==(n=this.$content.triggerHandler(t,e))?n:s},open:function(e){this.opened||(this.opened=!0,t("html").addClass(o+"open"),this.$container.addClass(o+"open"),this.$content.focus(),this._trigger("open"))},close:function(){var e=this;this.opened&&this._triggerHandler("close")!==!1&&(this.$container.removeClass(o+"open"),setTimeout(function(){t("html").removeClass(o+"open"),e.opened=!1},this.settings.animationDuration),this._trigger("close"))},isOpen:function(){return this.opened},option:function(e,n){if(!e)return t.extend({},this.settings);var i;if("string"==typeof e){if(1===arguments.length)return void 0!==this.settings[e]?this.settings[e]:null;i={},i[e]=n}else i=e;this._setOptions(i)},_setOptions:function(t){for(key in t){var e=t[key];this.settings[key]=e}},destroy:function(){this._trigger("destroy"),this.opened&&this.close(),this._unbind(),this._resetContent(),this._removeContainer(),this.$elements.each(function(){t(this).removeData(i)})}},t.fn.apFullscreenModal=function(e){if("string"==typeof e){var o,s,r=[],c=Array.prototype.slice.call(arguments,1);return this.each(function(){if(o=t(this).data(i)){if("function"==typeof(s=o[e])&&"_"!==e.charAt(0)){var n=s.apply(o,c);void 0!==n&&r.push(n)}}else r.push(void 0)}),r.length?1===r.length?r[0]:r:this}var o=new n(this,e);return o?this:!1},n.defaultSettings={autoOpen:!1,backgroundColor:"#fff",openSelector:void 0,closeSelector:"close-modal",showCloseButton:!0,animationDuration:200},n.template='<div class="'+o+'container"><div class="'+o+"wrapper "+o+'clearfix"><div class="'+o+'close-button close-modal"></div></div></div>'}(jQuery);